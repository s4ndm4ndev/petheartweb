{{/*
  Comprehensive SEO Meta Tags
  This partial handles all SEO-related meta tags including Open Graph, Twitter Cards, and structured data
*/}}

<!-- Basic SEO Meta Tags -->
{{ $title := cond .IsHome .Site.Title (printf "%s | %s" .Title .Site.Title) }}
<title>{{ $title }}</title>

{{ $description := .Description | default .Summary | default .Site.Params.description }}
<meta name="description" content="{{ $description | truncate 160 }}" />

{{ with .Params.keywords }}
<meta name="keywords" content="{{ delimit . ", " }}" />
{{ else }}
<meta name="keywords" content="{{ delimit .Site.Params.keywords ", " }}" />
{{ end }}

<meta name="author" content="{{ .Site.Params.author }}" />
<meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
<meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />

<!-- Canonical URL -->
<link rel="canonical" href="{{ .Permalink }}" />

<!-- Open Graph Meta Tags -->
<meta property="og:type" content="{{ if .IsHome }}website{{ else }}article{{ end }}" />
<meta property="og:url" content="{{ .Permalink }}" />
<meta property="og:title" content="{{ $title }}" />
<meta property="og:description" content="{{ $description | truncate 300 }}" />
<meta property="og:site_name" content="{{ .Site.Title }}" />
<meta property="og:locale" content="{{ .Site.LanguageCode | default "en_US" }}" />

<!-- Open Graph Image -->
{{ $ogImage := .Site.BaseURL | printf "%s/images/logo/logo-200.png" }}
{{ with .Params.image }}
  {{ $ogImage = . | absURL }}
{{ end }}
<meta property="og:image" content="{{ $ogImage }}" />
<meta property="og:image:width" content="200" />
<meta property="og:image:height" content="200" />
<meta property="og:image:alt" content="Pet Heart Animal Clinic Logo - Heart with paw print design" />
<meta property="og:image:type" content="image/png" />

{{ if not .IsHome }}
<!-- Article-specific Open Graph tags -->
<meta property="article:author" content="{{ .Site.Params.author }}" />
<meta property="article:published_time" content="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}" />
<meta property="article:modified_time" content="{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}" />
{{ with .Params.tags }}
  {{ range . }}
<meta property="article:tag" content="{{ . }}" />
  {{ end }}
{{ end }}
{{ end }}

<!-- Twitter Card Meta Tags -->
<meta name="twitter:card" content="summary_large_image" />
{{ with .Site.Params.twitter_site }}
<meta name="twitter:site" content="{{ . }}" />
{{ end }}
<meta name="twitter:title" content="{{ $title }}" />
<meta name="twitter:description" content="{{ $description | truncate 200 }}" />
<meta name="twitter:image" content="{{ $ogImage }}" />
<meta name="twitter:image:alt" content="Pet Heart Animal Clinic Logo - Heart with paw print design" />

<!-- Additional SEO Meta Tags -->
<meta name="format-detection" content="telephone=no" />
<meta name="mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="default" />
<meta name="apple-mobile-web-app-title" content="Pet Heart Animal Clinic" />

<!-- Geo Location (for local business) -->
<meta name="geo.region" content="LK-1" />
<meta name="geo.placename" content="Colombo" />
<meta name="geo.position" content="{{ .Site.Params.latitude }};{{ .Site.Params.longitude }}" />
<meta name="ICBM" content="{{ .Site.Params.latitude }}, {{ .Site.Params.longitude }}" />

<!-- Language and Alternate URLs -->
{{ range .AllTranslations }}
<link rel="alternate" hreflang="{{ .Language.Lang }}" href="{{ .Permalink }}" />
{{ end }}
<link rel="alternate" hreflang="x-default" href="{{ .Permalink }}" />

<!-- JSON-LD Structured Data -->
{{ partial "structured-data.html" . }}